{% macro jobCard(job) %}
    <div class="job-card bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:-translate-y-1 transition-all duration-200" 
         data-name="{{ job.name }}"
         data-location="{{ job.location }}" 
         data-capability="{{ job.capability }}" 
         data-band="{{ job.band }}">
        <div class="text-2xl font-bold text-gray-800 mb-4">{{ job.name }}</div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div class="text-gray-600 flex items-center">
                <i data-lucide="map-pin" class="h-5 w-5 mr-2 text-blue-600"></i>
                {{ job.location }}
            </div>
            <div class="text-gray-600 flex items-center">
                <i data-lucide="building" class="h-5 w-5 mr-2 text-purple-600"></i>
                {{ job.capability }}
            </div>
            <div class="text-gray-600 flex items-center">
                <i data-lucide="badge" class="h-5 w-5 mr-2 text-green-600"></i>
                {{ job.band }}
            </div>
            <div class="text-red-600 font-medium flex items-center">
                <i data-lucide="calendar" class="h-5 w-5 mr-2"></i>
                Closing: {{ job.closingDate }}
            </div>
            <div class="flex items-center">
                {% if job.status == 'open' %}
                    <i data-lucide="circle-check" class="h-5 w-5 mr-2 text-green-700" aria-hidden="true"></i>
                    <span class="text-green-700 font-medium">Open</span>
                {% else %}
                    <i data-lucide="circle-x" class="h-5 w-5 mr-2 text-red-600" aria-hidden="true"></i>
                    <span class="text-red-600 font-medium">Closed</span>
                {% endif %}
            </div>
            <div class="text-gray-600 flex items-center">
                <i data-lucide="users" class="h-5 w-5 mr-2 text-orange-600"></i>
                {{ job.numberOfOpenPositions }} position{% if job.numberOfOpenPositions != 1 %}s{% endif %} available
            </div>
        </div>
        <div class="flex justify-between items-center">
            <a href="/jobs/{{ job.id }}" class="text-blue-600 hover:text-blue-800 font-medium">View Details</a>
            <div class="flex items-center space-x-2">
                {% if isAuthenticated and currentUser.role === "admin" %}
                    <a href="/jobs/{{ job.id }}/applications" class="btn btn-sm bg-purple-600 hover:bg-purple-700 text-white border-none">
                        View Applications
                    </a>
                {% endif %}
                {% if job.status == 'open' and job.numberOfOpenPositions > 0 %}
                    {% if isAuthenticated %}
                        <a href="/jobs/{{ job.id }}/apply" class="btn bg-blue-600 hover:bg-blue-700 text-white border-none">Apply Now</a>
                    {% else %}
                        <a href="/login?redirectTo=/jobs/{{ job.id }}/apply" class="btn bg-blue-600 hover:bg-blue-700 text-white border-none">Login to Apply</a>
                    {% endif %}
                {% elif job.status == 'open' and job.numberOfOpenPositions == 0 %}
                    <button class="btn bg-gray-400 text-white border-none cursor-not-allowed" disabled>No Positions</button>
                {% else %}
                    <button class="btn bg-gray-400 text-white border-none cursor-not-allowed" disabled>Closed</button>
                {% endif %}
            </div>
        </div>
    </div>
{% endmacro %}